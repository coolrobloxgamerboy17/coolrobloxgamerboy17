name: Install and Authenticate Git

on:
  workflow_dispatch:  # Allows manual execution from the Actions tab

jobs:
  setup-and-test-git:
    runs-on: ubuntu-latest

    steps:
      - name: Install Git
        run: sudo apt update && sudo apt install -y git

      - name: Check Git Version
        run: git --version

      - name: Authenticate with GitHub
        run: |
          git config --global user.name "${{ github.actor }}"
          git config --global user.email "${{ github.actor }}@users.noreply.github.com"
          git config --global credential.helper store
          echo "https://${{ secrets.GH_PAT }}@github.com" > ~/.git-credentials
        env:
          GH_PAT: ${{ secrets.GH_PAT }}

      - name: Verify Git Authentication
        run: |
          if git ls-remote https://github.com/${{ github.actor }}/coolrobloxgamerboy17.git &>/dev/null; then
            echo "Authentication Successful"
          else
            echo "Authentication Failed" && exit 1
          fi
